<html>
	<head>
		<title>Menu</title>
	</head>
<body>
<script>
	var gui = require('nw.gui');
	var win = gui.Window.get();
	var menubar = new gui.Menu({type:'menubar'});
	var sub1 = new gui.Menu();
	sub1.append(new gui.MenuItem({
		label:"Test1",
		click:function(){
			var mongoose = require('mongoose');
			mongoose.connect('mongodb://test:test@localhost/bc8');
			var db = mongoose.connection;
			db.on('error', console.error.bind(console, 'connection error:'));
			db.once('open', function() {
			console.log('mongoose opened!');
			var caixiSchema = new mongoose.Schema({
					name:{type: String}, 
					en:{type: String}
					}, 
					{collection: "bc8_caixi"}
				);
				var CaixiModel = mongoose.model('Caixi',caixiSchema);
			
				// CaixiModel.find({},null,null,function(err,docs){
				// 	if(err){
				// 		console.log(err);
				// 	}else{
				// 		console.log(docs);
				// 	}
				// });
				var c = new CaixiModel();
				c.name = "name2";
				c.en = "en2";
				c.save(function(err,doc){
					if(err)console.log(err);
					else console.log(doc);
				});
			});
		}
	}));
	sub1.append(new gui.MenuItem({
		label:"Test2",
		click:function(){
			var winston = require('winston');
			winston.log('info', 'Hello distributed log files!');
		}
	}));
	
	
	menubar.append(new gui.MenuItem({label:'Sub1',submenu:sub1}))
	win.menu = menubar;
	
</script>
</body>
</html>